{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["// export function getPhotos(query, page) {\n//   const API_KEY = '42801322-2062a11e10d8e6d4e2ccea576';\n//   const BASE_URL = 'https://pixabay.com/';\n//   const END_POINT = 'api/';\n//   const params = new URLSearchParams({\n//     key: API_KEY,\n//     q: query,\n//     page,\n//     per_page: 15,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//   });\n\n//   const url = `${BASE_URL}${END_POINT}/?${params}`;\n\n//   return fetch(url).then(res => {\n//     if (!res.ok) {\n//       throw new Error(res.status);\n//     }\n//     return res.json();\n//   });\n// }\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getPhotos(query, page, perPage) {\n  console.log(query, page, perPage);\n  const { data } = await axios.get('', {\n    params: {\n      key: '42801322-2062a11e10d8e6d4e2ccea576',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst gallery = document.querySelector('.js-gallery');\n\nexport function renderImages(arr) {\n  const markup = renderMarkup(arr);\n  gallery.insertAdjacentHTML('beforeend', markup); //\n  lightbox.refresh();\n}\n\nfunction renderMarkup(arr) {\n  return arr.map(createImageCard).join('\\n');\n}\n\nfunction createImageCard({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return ` <li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n        <ul class=\"description\">\n          <li class=\"desc-item\">\n            <p class=\"des-p\">Likes</p> ${likes}\n          </li>\n          <li class=\"desc-item\">\n            <p class=\"des-p\">Views</p> ${views}\n          </li>\n          <li class=\"desc-item\">\n            <p class=\"des-p\">Comments</p> ${comments}\n          </li>\n          <li class=\"desc-item\">\n            <p class=\"des-p\">Downloads</p> ${downloads}\n          </li>\n        </ul>\n      </a>\n    </li>`;\n}\n\nexport function clearMarkup() {\n  gallery.innerHTML = '';\n}\n","import { getPhotos } from './js/pixabay-api.js';\nimport { renderImages, clearMarkup } from './js/render-function.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.js-gallery');\nconst formEl = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\nconst msgErr =\n  'Sorry, there are no images matching your search query. Please try again!';\nconst msgEmpty = 'Error, empty field';\nconst msgEndLoad = \"We're sorry, but you've reached the end of search results.\";\n\nlet userWord;\nlet page;\nlet perPage = 15;\nlet lastPage;\n\nformEl.addEventListener('submit', onSubmitBtn);\nloadMoreBtn.addEventListener('click', onBtnClick);\n\nasync function onSubmitBtn(e) {\n  e.preventDefault();\n  showLoader();\n  clearMarkup();\n  loadMoreBtnHide();\n  page = 1;\n\n  const userQuery = e.target.elements.data.value.trim().split(' ');\n  userWord = userQuery.filter(word => word).join('+');\n\n  if (!userWord) {\n    clearMarkup();\n    showMessage(msgEmpty);\n    hideLoader();\n    return;\n  }\n  console.log(page);\n  try {\n    const res = await getPhotos(userWord, page, perPage);\n\n    if (res.hits.length === 0) {\n      hideLoader();\n      showMessage(msgErr);\n    } else {\n      renderImages(res.hits);\n      loadMoreBtnShow();\n    }\n    hideLoader();\n    if (res.totalHits <= perPage) {\n      loadMoreBtnHide();\n    }\n    lastPage = Math.ceil(res.totalHits / perPage);\n    lastPageMsg();\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n  }\n\n  e.target.reset();\n}\n\nasync function onBtnClick() {\n  showLoader();\n  page += 1;\n\n  try {\n    const res = await getPhotos(userWord, page, perPage);\n    renderImages(res.hits);\n\n    forScroll();\n    lastPageMsg();\n    hideLoader();\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n  }\n}\n\nfunction lastPageMsg() {\n  if (page === lastPage) {\n    loadMoreBtnHide();\n    showMessage(msgEndLoad);\n  }\n}\n\nfunction showLoader(container) {\n  loader.classList.remove('is-hide');\n}\n\nfunction hideLoader(container) {\n  loader.classList.add('is-hide');\n}\n\nfunction showMessage(message) {\n  const msgOptions = {\n    message,\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: '#fff',\n\n    backgroundColor: '#EF4040',\n    progressBarColor: '#B51B1B',\n\n    theme: 'dark',\n    position: 'topRight',\n    class: 'message',\n  };\n  iziToast.show(msgOptions);\n}\n\nfunction loadMoreBtnShow() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\nfunction loadMoreBtnHide() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nfunction forScroll() {\n  const height = gallery.firstElementChild.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    behavior: 'smooth',\n    top: height,\n  });\n}\n"],"names":["axios","getPhotos","query","page","perPage","data","lightbox","SimpleLightbox","gallery","renderImages","arr","markup","renderMarkup","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearMarkup","formEl","loader","loadMoreBtn","msgErr","msgEmpty","msgEndLoad","userWord","lastPage","onSubmitBtn","onBtnClick","showLoader","loadMoreBtnHide","word","showMessage","hideLoader","res","loadMoreBtnShow","lastPageMsg","error","forScroll","container","message","msgOptions","iziToast","height"],"mappings":"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"}